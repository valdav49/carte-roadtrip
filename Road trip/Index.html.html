<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Test Carte Leaflet</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
  html, body { height: 100%; margin: 0; }
  #map { width: 100%; height: 100%; }
</style>

<!-- Intégration directe Leaflet CSS -->
<style>
.leaflet-container {
    font: 12px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif;
}
.leaflet-popup-content {
    font-size: 14px;
}
</style>

<!-- Leaflet JS et CSS en local (version minifiée) -->
<script>
/* Ici je peux mettre Leaflet minifié directement pour autonomie */
</script>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

</head>
<body>

<div id="map"></div>

<script>
// Création de la carte centrée sur l’Australie-Occidentale
var map = L.map('map').setView([-30.0, 115.0], 5);

// Fond de carte OpenStreetMap
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '© OpenStreetMap contributors'
}).addTo(map);

// Données : 3 points d’exemple
var points = [
    {
        coords: [-31.9505, 115.8605],
        titre: "Perth",
        texte: "Point de départ du road trip.<br>Conseil : faites vos courses ici avant de partir."
    },
    {
        coords: [-31.0183, 115.3314],
        titre: "Lancelin",
        texte: "Lancelin Sand Dunes : sandboard au lever/coucher du soleil.<br>Camping : Lancelin Caravan Park."
    },
    {
        coords: [-27.7100, 114.1650],
        titre: "Kalbarri",
        texte: "Nature’s Window, Z-Bend Gorge, Skywalk.<br>Camping : Murchison House Station."
    }
];

// Ajout des marqueurs rouges
points.forEach(function(p) {
    L.marker(p.coords, { icon: L.icon({
        iconUrl: "https://maps.gstatic.com/mapfiles/ms2/micons/red-dot.png",
        iconSize: [32, 32],
        iconAnchor: [16, 32],
        popupAnchor: [0, -32]
    }) })
    .addTo(map)
    .bindPopup("<b>" + p.titre + "</b><br>" + p.texte);
});

// Tracé de l’itinéraire entre les points
var coordsPath = points.map(p => p.coords);
L.polyline(coordsPath, { color: 'red' }).addTo(map);
</script>

</body>
</html>